/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'andrew' at '12/06/16 10:46' with Gradle 2.9
 */

buildscript {
    repositories {
        mavenCentral()
		maven {
			url("https://plugins.gradle.org/m2/")			
		  }			
    }
    dependencies {
    	classpath("org.springframework.boot:spring-boot-gradle-plugin:1.3.5.RELEASE")
		classpath("org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.0.1")
    }
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'groovy'
apply plugin: 'org.sonarqube'
apply plugin: 'spring-boot'

jar {
  baseName = 'mttnow-test-ab'
  version = '0.0.1'  
}

repositories {	
    mavenCentral()
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

sourceSets {
	acceptanceTest {		
		java {
			compileClasspath += main.output + test.output
			runtimeClasspath += main.output + test.output
			srcDir file('src/acceptance-test/java')
		}
		resources.srcDir file('src/acceptance-test/resources')
	}	
}

configurations {
	acceptanceTestCompile.extendsFrom testCompile
	acceptanceTestRuntime.extendsFrom testRuntime
}

dependencies {
  compile 					"commons-validator:commons-validator:1.4.0",
  							"com.google.code.findbugs:jsr305:3.0.1",
  							"org.slf4j:log4j-over-slf4j:1.1.0-RC1",
  							"commons-lang:commons-lang:2.0",
  							"com.google.guava:guava-parent:19.0",
  							"com.google.collections:google-collections:1.0-rc3",
  							"org.springframework.boot:spring-boot-starter:1.3.5.RELEASE",
  							"org.jsoup:jsoup:1.9.2",
  							"org.apache.httpcomponents:httpclient-osgi:4.5.2",
  							"commons-io:commons-io:1.2",  							
  							"org.imgscalr:imgscalr-lib:4.2"
													
  testCompile 				"org.codehaus.groovy:groovy-all:2.3.11",
  							"org.spockframework:spock-core:1.0-groovy-2.3",
							"cglib:cglib-nodep:3.1",
							"org.objenesis:objenesis:1.4",
							
							"info.cukes:cucumber-java:1.2.4",
							"info.cukes:cucumber-spring:1.2.4",
							"info.cukes:cucumber-junit:1.2.4",
							"org.apache.servicemix.bundles:org.apache.servicemix.bundles.spring-test:4.0.7.RELEASE_3",
							"org.springframework:spring-test:2.5.6.SEC03",
							"com.github.tomakehurst:wiremock:2.1.0-beta"
}

task acceptanceTest(type: Test) {
	testClassesDir = sourceSets.acceptanceTest.output.classesDir
    classpath = sourceSets.acceptanceTest.runtimeClasspath
	outputs.upToDateWhen { false }
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.9'
}